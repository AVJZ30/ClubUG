<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>El Sabrosito ¬∑ La Hamburguesa de la UG</title>
  
  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Fredoka', sans-serif;
      background: #fef7e9;
      color: #3b2a1c;
      line-height: 1.5;
      overflow-x: hidden;
    }

    :root {
      --pan-suave: #fde3a7;
      --pan-tostado: #f8c471;
      --pan-quemado: #e67e22;
      --carne-jugosa: #b94e2c;
      --carne-gourmet: #9b3d1c;
      --carne-oscura: #6b2e14;
      --lechuga-crujiente: #7cb342;
      --lechuga-oscura: #558b2f;
      --tomate-fresco: #e74c3c;
      --queso-derretido: #f1c40f;
      --queso-dorado: #f39c12;
      --mayonesa-cremosa: #fdf2e4;
      --ketchup-intenso: #c0392b;
      --texto-principal: #2c1810;
      --sombra-jugosa: 0 25px 35px -12px rgba(185, 78, 44, 0.4);
    }

    /* BOT√ìN PARA REGRESAR AL INICIO */
    .back-to-home {
      position: fixed;
      bottom: 30px;
      left: 30px;
      background: linear-gradient(145deg, var(--carne-jugosa), var(--carne-gourmet));
      color: white;
      text-decoration: none;
      padding: 15px 25px;
      border-radius: 60px;
      font-size: 1.2rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      z-index: 1001;
      border: 4px solid var(--queso-derretido);
      transition: all 0.3s;
      animation: slideInLeft 0.8s ease-out;
    }

    .back-to-home:hover {
      transform: translateY(-5px) scale(1.05);
      background: linear-gradient(145deg, #d45a30, #b34b26);
      border-color: white;
    }

    .back-to-home i {
      font-size: 1.3rem;
    }

    /* Hamburguesa flotante */
    .floating-burger-icon {
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: linear-gradient(145deg, var(--queso-derretido), var(--pan-tostado));
      width: 80px;
      height: 80px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      box-shadow: 0 15px 25px rgba(185, 78, 44, 0.5);
      z-index: 1000;
      animation: float 3.5s ease-in-out infinite;
      border: 5px solid white;
      color: var(--carne-oscura);
      cursor: pointer;
      transition: 0.3s;
    }

    .floating-burger-icon:hover {
      transform: scale(1.15) rotate(10deg);
    }

    /* HEADER */
    .burger-header {
      background: linear-gradient(165deg, var(--pan-suave) 0%, var(--pan-tostado) 70%, var(--pan-quemado) 100%);
      padding: 2.5rem 1rem 3rem;
      text-align: center;
      border-bottom: 10px dashed var(--queso-derretido);
      box-shadow: 0 15px 25px rgba(185, 78, 44, 0.25);
      position: relative;
      overflow: hidden;
      clip-path: polygon(0 0, 100% 0, 100% 90%, 50% 100%, 0 90%);
    }

    .burger-header::before {
      content: "üçî ü•¨ üçÖ üßÄ ü•© ü´ë";
      position: absolute;
      bottom: 5px;
      left: 0;
      width: 100%;
      font-size: 2.5rem;
      opacity: 0.15;
      letter-spacing: 15px;
      transform: rotate(-1deg);
      white-space: nowrap;
      animation: moverIngredientes 20s linear infinite;
    }

    .burger-header h1 {
      font-size: 5rem;
      font-weight: 800;
      color: var(--carne-oscura);
      text-shadow: 5px 5px 0 var(--queso-derretido), 8px 8px 0 var(--lechuga-crujiente), 11px 11px 0 var(--tomate-fresco);
      margin-bottom: 1rem;
      animation: slideDown 0.8s ease-out;
      letter-spacing: -1px;
      transform: rotate(-0.5deg);
    }

    .burger-header p {
      font-size: 2rem;
      font-weight: 600;
      color: var(--carne-gourmet);
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(8px);
      display: inline-block;
      padding: 0.8rem 2.5rem;
      border-radius: 60px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      animation: fadeIn 1s ease-out 0.2s both;
      border: 3px solid white;
    }

    /* HISTORIA */
    .historia-completa {
      max-width: 1000px;
      margin: 4rem auto;
      padding: 2.5rem 3rem;
      background: var(--mayonesa-cremosa);
      border-radius: 120px 40px 120px 40px;
      box-shadow: var(--sombra-jugosa);
      border: 4px solid var(--lechuga-crujiente);
      position: relative;
      transform: rotate(0.3deg);
      transition: all 0.4s;
    }

    .historia-completa:hover {
      transform: rotate(0deg) scale(1.01);
      border-color: var(--tomate-fresco);
    }

    .historia-completa h2 {
      font-size: 3rem;
      color: var(--carne-gourmet);
      border-bottom: 6px dotted var(--queso-derretido);
      display: inline-block;
      margin-bottom: 2rem;
      position: relative;
      font-weight: 700;
    }

    .historia-completa h2 i {
      color: var(--tomate-fresco);
      margin-right: 15px;
    }

    .historia-texto {
      font-size: 1.3rem;
      line-height: 1.8;
      color: var(--texto-principal);
      margin-bottom: 2.5rem;
      position: relative;
      padding-left: 20px;
    }

    .historia-texto::before {
      content: "‚Äú";
      font-size: 6rem;
      color: var(--pan-tostado);
      position: absolute;
      left: -30px;
      top: -20px;
      opacity: 0.5;
      font-family: serif;
    }

    .vision-mision-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-top: 3rem;
    }

    .vision-card, .mision-card {
      background: white;
      padding: 2rem;
      border-radius: 60px 20px 60px 20px;
      box-shadow: 0 15px 25px rgba(0,0,0,0.1);
      border: 3px solid var(--queso-derretido);
      transition: 0.3s;
    }

    .vision-card:hover, .mision-card:hover {
      transform: translateY(-10px);
      border-color: var(--tomate-fresco);
    }

    .vision-card h3, .mision-card h3 {
      font-size: 2rem;
      color: var(--carne-jugosa);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .vision-card p, .mision-card p {
      font-size: 1.2rem;
      color: var(--texto-principal);
      line-height: 1.6;
    }

    /* PRODUCTOS */
    .productos-grid {
      display: flex;
      justify-content: center;
      gap: 3rem;
      flex-wrap: wrap;
      max-width: 1100px;
      margin: 4rem auto;
      padding: 0 2rem;
    }

    .producto-card {
      flex: 1 1 300px;
      max-width: 400px;
      background: linear-gradient(145deg, #fff6e9, #ffecd9);
      border-radius: 120px 120px 40px 40px;
      overflow: hidden;
      box-shadow: 0 30px 30px -10px rgba(185, 78, 44, 0.4);
      transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      border: 5px solid var(--pan-tostado);
      position: relative;
    }

    .producto-card:nth-child(1) {
      transform: rotate(-1deg);
    }
    .producto-card:nth-child(2) {
      transform: rotate(1deg);
    }

    .producto-card:hover {
      transform: translateY(-25px) rotate(0deg) scale(1.02);
      box-shadow: 0 40px 45px -8px var(--carne-gourmet);
      border-color: var(--queso-derretido);
    }

    .producto-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 35px;
      background: repeating-linear-gradient(45deg, var(--queso-derretido) 0px, var(--queso-derretido) 15px, var(--pan-tostado) 15px, var(--pan-tostado) 30px);
      z-index: 3;
      border-bottom: 3px solid white;
    }

    .producto-imagen {
      height: 280px;
      background-size: cover;
      background-position: center;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      transition: transform 0.7s;
      position: relative;
    }

    .producto-card:hover .producto-imagen {
      transform: scale(1.1);
    }

    .hamburguesa-img {
      background-image: url('https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=600&auto=format');
      background-color: #d47b48;
      background-blend-mode: overlay;
    }

    .sanduche-img {
      background-image: url('https://images.unsplash.com/photo-1606755456206-b25206cde27e?w=600&auto=format');
      background-color: #e09d6e;
      background-blend-mode: soft-light;
    }

    .producto-etiqueta {
      background: linear-gradient(transparent 0%, rgba(43, 21, 7, 0.9) 90%);
      width: 100%;
      padding: 2.5rem 1rem 1.5rem;
      text-align: center;
    }

    .producto-etiqueta h3 {
      font-size: 2.3rem;
      font-weight: 700;
      color: white;
      text-shadow: 3px 3px 0 var(--ketchup-intenso), 5px 5px 0 rgba(0,0,0,0.3);
      background: rgba(185, 78, 44, 0.8);
      backdrop-filter: blur(4px);
      display: inline-block;
      padding: 0.3rem 2.2rem;
      border-radius: 50px;
      border: 3px solid var(--queso-derretido);
    }

    .producto-card p {
      padding: 1.8rem 1.5rem;
      text-align: center;
      font-weight: 500;
      font-size: 1.2rem;
      background: #ffffffd9;
      color: var(--carne-oscura);
      margin: 0;
    }

    /* OPINIONES */
    .opiniones-section {
      background: linear-gradient(135deg, #fdefd4, #fadcb9);
      padding: 5rem 2rem;
      border-top: 15px dotted var(--tomate-fresco);
      border-bottom: 15px dotted var(--lechuga-crujiente);
      position: relative;
    }

    .opiniones-section h2 {
      text-align: center;
      font-size: 3.8rem;
      font-weight: 700;
      color: var(--carne-oscura);
      text-shadow: 4px 4px 0 var(--queso-derretido), 6px 6px 0 var(--lechuga-crujiente);
      margin-bottom: 3rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .formulario-opinion {
      max-width: 750px;
      margin: 0 auto 4rem;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 2.8rem;
      border-radius: 120px 30px 120px 30px;
      box-shadow: 0 30px 50px rgba(211, 84, 0, 0.3);
      border: 5px solid white;
    }

    .input-group {
      margin-bottom: 2rem;
    }

    .input-group label {
      display: block;
      font-weight: 600;
      font-size: 1.3rem;
      color: var(--carne-gourmet);
      margin-bottom: 0.7rem;
    }

    .input-group input,
    .input-group textarea {
      width: 100%;
      padding: 1.2rem 2rem;
      border: 4px solid var(--pan-tostado);
      border-radius: 80px;
      font-family: 'Fredoka', sans-serif;
      font-size: 1.1rem;
      transition: all 0.3s;
      background: #fffcf5;
    }

    .input-group textarea {
      border-radius: 50px;
      min-height: 130px;
    }

    .input-group input:focus,
    .input-group textarea:focus {
      outline: none;
      border-color: var(--tomate-fresco);
      box-shadow: 0 0 0 8px rgba(231, 76, 60, 0.15);
      transform: scale(1.02);
    }

    .btn-hamburguesa {
      background: linear-gradient(145deg, var(--carne-jugosa), var(--carne-gourmet));
      color: white;
      border: none;
      padding: 1.3rem 2.8rem;
      font-size: 1.6rem;
      font-weight: 600;
      border-radius: 80px;
      cursor: pointer;
      width: 100%;
      transition: 0.2s;
      border-bottom: 7px solid #4a2a14;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      box-shadow: 0 10px 15px -5px rgba(0,0,0,0.3);
    }

    .btn-hamburguesa:hover {
      transform: translateY(-5px);
      border-bottom-width: 9px;
      background: linear-gradient(145deg, #d45a30, #b34b26);
    }

    .btn-hamburguesa:active {
      transform: translateY(5px);
      border-bottom-width: 3px;
    }

    .opiniones-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 2.5rem;
      max-width: 1300px;
      margin: 0 auto;
    }

    .opinion-card {
      background: white;
      border-radius: 60px 60px 60px 20px;
      padding: 2rem;
      box-shadow: 0 20px 35px -10px #8b5a2b;
      border: 4px solid var(--lechuga-crujiente);
      transition: 0.4s;
      display: flex;
      flex-direction: column;
      gap: 15px;
      animation: aparecer 0.5s ease-out;
    }

    .opinion-card:hover {
      transform: scale(1.02) rotate(-0.8deg);
      border-color: var(--tomate-fresco);
      box-shadow: 0 30px 45px -8px var(--ketchup-intenso);
    }

    .opinion-header {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .opinion-avatar {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: linear-gradient(145deg, var(--pan-tostado), var(--queso-derretido));
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: 700;
      color: var(--carne-oscura);
      border: 4px solid white;
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }

    .opinion-nombre {
      font-size: 1.7rem;
      font-weight: 600;
      color: var(--carne-gourmet);
    }

    .opinion-texto {
      font-size: 1.15rem;
      padding: 1rem 1.5rem;
      background: #fff7eb;
      border-radius: 40px 40px 40px 10px;
      border-left: 10px solid var(--tomate-fresco);
      line-height: 1.6;
    }

    .opinion-imagen {
      width: 100%;
      max-height: 280px;
      object-fit: cover;
      border-radius: 40px;
      border: 5px solid var(--pan-tostado);
      transition: 0.3s;
    }

    .opinion-imagen:hover {
      transform: scale(1.03);
      border-color: var(--queso-derretido);
    }

    /* ANIMACIONES */
    @keyframes slideDown {
      0% { opacity: 0; transform: translateY(-70px) rotate(-5deg); }
      100% { opacity: 1; transform: translateY(0) rotate(-0.5deg); }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }

    @keyframes moverIngredientes {
      0% { transform: translateX(0) rotate(-1deg); }
      100% { transform: translateX(-50%) rotate(-1deg); }
    }

    @keyframes aparecer {
      from { opacity: 0; transform: translateY(50px) scale(0.9); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-100px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .loader-burger {
      text-align: center;
      font-size: 2.5rem;
      grid-column: 1 / -1;
      padding: 4rem;
      color: var(--carne-jugosa);
    }

    /* Responsive */
    @media (max-width: 800px) {
      .burger-header h1 { font-size: 3.5rem; }
      .burger-header p { font-size: 1.6rem; }
      .historia-completa { padding: 2rem; }
      .vision-mision-grid { grid-template-columns: 1fr; }
      .opiniones-section h2 { font-size: 2.8rem; }
      .back-to-home {
        bottom: 20px;
        left: 20px;
        padding: 12px 20px;
        font-size: 1rem;
      }
      .floating-burger-icon {
        bottom: 20px;
        right: 20px;
        width: 60px;
        height: 60px;
        font-size: 2.2rem;
      }
    }

    @media (max-width: 500px) {
      .burger-header h1 { font-size: 2.8rem; }
      .historia-texto { font-size: 1.1rem; }
    }
  </style>
</head>
<body>

<!-- BOT√ìN PARA REGRESAR AL INICIO (INDEX.HTML) -->
<a href="index.html" class="back-to-home">
  <i class="fas fa-arrow-left"></i>
  Volver al Inicio
</a>

<!-- Hamburguesa flotante -->
<div class="floating-burger-icon" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
  üçî
</div>

<!-- HEADER -->
<header class="burger-header">
  <h1>El Sabrosito</h1>
  <p>üçî La Sabrosa Historia del Club UG ü•¨</p>
</header>

<!-- HISTORIA COMPLETA con VISI√ìN Y MISI√ìN -->
<section class="historia-completa">
  <h2><i class="fas fa-scroll"></i> Nuestra Historia</h2>
  
  <div class="historia-texto">
    Todo comenz√≥ con la idea de proveer comida de calidad, sabrosa y de adquisici√≥n c√≥moda para el estudiante universitario. No importa de qu√© carrera seas, siempre tendr√°s tu comida en tus manos mientras El Sabrosito est√© sobre la mesa.
  </div>
  
  <div class="historia-texto">
    La historia inici√≥ como un proyecto peque√±o, pero con una gran visi√≥n: ofrecer comida casera y saludable. Hace casi un a√±o empec√© a cocinar comida sabrosa, y han sido ustedes quienes le han dado el √©xito a este negocio, regresando una y otra vez por ese sabor <strong>"buenardo"</strong> que nos caracteriza. Poco a poco nos fuimos extendiendo en varios grupos, dentro y fuera de la UG, creciendo gracias al apoyo de cada uno.
  </div>

  <div class="vision-mision-grid">
    <div class="vision-card">
      <h3><i class="fas fa-eye"></i> Visi√≥n</h3>
      <p>Llenar a la UG con las mejores hamburguesas para estudiantes, profesores y p√∫blico en general. Ser el sello distintivo de la comida universitaria en Guayaquil.</p>
    </div>
    <div class="mision-card">
      <h3><i class="fas fa-bullseye"></i> Misi√≥n</h3>
      <p>Brindar el mejor servicio, unir amistades y ser una mano amiga durante tus clases y tambi√©n fuera del horario estudiantil. Porque El Sabrosito es m√°s que comida, es comunidad.</p>
    </div>
  </div>
</section>

<!-- PRODUCTOS: DOS CUADROS -->
<div class="productos-grid">
  <div class="producto-card">
    <div class="producto-imagen hamburguesa-img">
      <div class="producto-etiqueta">
        <h3>üçî La Cl√°sica</h3>
      </div>
    </div>
    <p>Doble carne angus, queso cheddar, lechuga hidrop√≥nica, tomate pera y nuestra salsa especial "Sabrosito". Pan brioche artesanal con ajonjol√≠.</p>
  </div>
  
  <div class="producto-card">
    <div class="producto-imagen sanduche-img">
      <div class="producto-etiqueta">
        <h3>ü•™ El Pollo Buenardo</h3>
      </div>
    </div>
    <p>Pechuga marinada en especias secretas, mayonesa de la casa, aguacate, queso mozzarella, tocineta ahumada y cebolla caramelizada.</p>
  </div>
</div>

<!-- SECCI√ìN OPINIONES CON SUPABASE -->
<section class="opiniones-section" id="opiniones">
  <h2>
    <i class="fas fa-star"></i>
    Opiniones con Sabor
    <i class="fas fa-star"></i>
  </h2>

  <!-- FORMULARIO -->
  <div class="formulario-opinion">
    <div class="input-group">
      <label><i class="fas fa-user"></i> Tu nombre</label>
      <input type="text" id="nombreInput" placeholder="Ej: Juan Pantera" maxlength="50">
    </div>
    <div class="input-group">
      <label><i class="fas fa-comment"></i> Tu opini√≥n</label>
      <textarea id="textoInput" placeholder="¬°La mejor hamburguesa del campus! Ese sabor buenardo..."></textarea>
    </div>
    <div class="input-group">
      <label><i class="fas fa-image"></i> Foto (opcional, m√°x 2MB)</label>
      <div class="file-input-wrapper">
        <input type="file" id="fotoInput" accept="image/jpeg,image/png,image/jpg">
      </div>
      <small style="color:var(--carne-gourmet);">Sube una foto de tu hamburguesa o tu cara de felicidad</small>
    </div>
    <button class="btn-hamburguesa" id="btnEnviarOpinion">
      <i class="fas fa-utensils"></i> Publicar Opini√≥n
    </button>
  </div>

  <!-- GRID DE OPINIONES -->
  <div class="opiniones-grid" id="opinionesGrid">
    <div class="loader-burger">
      <i class="fas fa-spinner fa-pulse"></i> Cargando opiniones jugosas...
    </div>
  </div>
</section>

<script>
  const SUPABASE_URL = 'https://ezartbcoxdxeslgeyvah.supabase.co';
  const SUPABASE_ANON_KEY = 'TU_ANON_KEY_AQUI';

  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  const TABLE_NAME = 'opiniones_sabrosito';

  const btnEnviar = document.getElementById('btnEnviarOpinion');
  const nombreInput = document.getElementById('nombreInput');
  const textoInput = document.getElementById('textoInput');
  const fotoInput = document.getElementById('fotoInput');
  const grid = document.getElementById('opinionesGrid');

  // üîê LOGIN AN√ìNIMO AUTOM√ÅTICO
  async function loginAnonimo() {
    const { data: session } = await supabase.auth.getSession();
    if (!session.session) {
      const { error } = await supabase.auth.signInAnonymously();
      if (error) {
        console.error("Error login an√≥nimo:", error.message);
      } else {
        console.log("Login an√≥nimo correcto");
      }
    }
  }

  // üì∑ SUBIR FOTO
  async function subirFoto(file) {
    if (!file) return null;

    const fileExt = file.name.split('.').pop();
    const fileName = `opiniones/${Date.now()}.${fileExt}`;

    const { error } = await supabase.storage
      .from('fotos-sabrosito')
      .upload(fileName, file);

    if (error) {
      console.error("Error subiendo imagen:", error.message);
      alert("Error al subir la imagen. Revisa el bucket.");
      return null;
    }

    const { data } = supabase.storage
      .from('fotos-sabrosito')
      .getPublicUrl(fileName);

    return data.publicUrl;
  }

  // üìù PUBLICAR OPINI√ìN
  btnEnviar.addEventListener('click', async () => {

    const nombre = nombreInput.value.trim();
    const opinion = textoInput.value.trim();
    const fotoFile = fotoInput.files[0];

    if (!nombre || !opinion) {
      alert("Completa nombre y opini√≥n üçî");
      return;
    }

    btnEnviar.disabled = true;
    btnEnviar.innerHTML = "Cocinando... üç≥";

    let fotoUrl = null;

    if (fotoFile) {
      if (fotoFile.size > 2 * 1024 * 1024) {
        alert("M√°ximo 2MB");
        btnEnviar.disabled = false;
        btnEnviar.innerHTML = "Publicar Opini√≥n";
        return;
      }
      fotoUrl = await subirFoto(fotoFile);
    }

    const { error } = await supabase
      .from(TABLE_NAME)
      .insert([{ nombre, opinion, foto_url: fotoUrl }]);

    if (error) {
      console.error("Error insertando:", error.message);
      alert("Error al guardar en la tabla.");
    } else {
      nombreInput.value = "";
      textoInput.value = "";
      fotoInput.value = "";
      cargarOpiniones();
    }

    btnEnviar.disabled = false;
    btnEnviar.innerHTML = "Publicar Opini√≥n";
  });

  // üì• CARGAR OPINIONES
  async function cargarOpiniones() {
    grid.innerHTML = "Cargando... üçî";

    const { data, error } = await supabase
      .from(TABLE_NAME)
      .select("*")
      .order("created_at", { ascending: false });

    if (error) {
      console.error("Error cargando:", error.message);
      grid.innerHTML = "Error cargando opiniones üòû";
      return;
    }

    if (!data.length) {
      grid.innerHTML = "S√© el primero en opinar üçî";
      return;
    }

    grid.innerHTML = "";

    data.forEach(op => {
      const card = document.createElement("div");
      card.className = "opinion-card";

      card.innerHTML = `
        <div class="opinion-header">
          <div class="opinion-avatar">${op.nombre.charAt(0).toUpperCase()}</div>
          <div class="opinion-nombre">${op.nombre}</div>
        </div>
        <div class="opinion-texto">${op.opinion}</div>
        ${op.foto_url ? `<img src="${op.foto_url}" class="opinion-imagen">` : ""}
      `;

      grid.appendChild(card);
    });
  }

  // üöÄ INICIALIZAR TODO
  async function iniciar() {
    await loginAnonimo();
    await cargarOpiniones();
  }

  iniciar();
</script>

</body>
</html>

